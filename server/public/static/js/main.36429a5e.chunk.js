(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{129:function(e,t,a){e.exports=a(227)},135:function(e,t,a){},136:function(e,t,a){},227:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),l=a(9),o=a(16),i=a.n(o),u=(a(134),a(135),a(8)),s=a(6),m=(a(136),a(235)),d=a(239),p=a(232),h=a(233),f=a(234),g=a(7);function b(){var e=Object(u.a)(["\n    background-color: rgba(0, 0, 0, 0.7);\n    height: 60px;\n    p,\n    a {\n      color: ",";\n    }\n    .dropdown-menu {\n      background-color: ",";\n      .dropdown-item:hover {\n        background-color: ",";\n      }\n    }\n  "]);return b=function(){return e},e}var E=function(e){var t=e.loggedInUser,a=e.showLogin,n=e.showSignup,l=e.logout,o=Object(g.default)(d.a)(b(),(function(e){return e.theme.colors.light+"!important"}),(function(e){return e.theme.background.semiSolid}),(function(e){return e.theme.background.modals}));return!1===t?r.a.createElement(p.a,null):null===t?r.a.createElement(o,null,r.a.createElement(h.a,{style:{width:"80%"}},r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{as:c.c,to:"/"},r.a.createElement("i",{className:"fas fa-home"}))),r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{onClick:a},"Login")),r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{onClick:n},"Signup"))),r.a.createElement(h.a,{style:{width:"20%",justifyContent:"flex-end"}},r.a.createElement(f.a,{title:"Mi perfil",id:"nav-dropdown",drop:"left"},r.a.createElement(f.a.Item,{eventKey:"4.1"},"Action"),r.a.createElement(f.a.Item,{eventKey:"4.2"},"Another action"),r.a.createElement(f.a.Item,{eventKey:"4.3"},"Something else here"),r.a.createElement(f.a.Divider,null),"style=",{width:"100vw"},r.a.createElement(f.a.Item,{eventKey:"4.4"},"Separated link")))):r.a.createElement(o,null,r.a.createElement(h.a,{style:{width:"80%"}},r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{as:c.c,to:"/"},r.a.createElement("i",{className:"fas fa-home"}))),r.a.createElement(h.a.Item,null,r.a.createElement(f.a,{title:"Mis historias",id:"nav-dropdown",drop:"down"},r.a.createElement(f.a.Item,null,r.a.createElement(h.a.Link,{as:c.c,to:"/myGames"},"En juego")),r.a.createElement(f.a.Divider,null),r.a.createElement(f.a.Item,null,r.a.createElement(h.a.Link,{as:c.c,to:"/myGames"},"Creadas por m\xed")))),r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{as:c.c,to:"/myCharacters"},"Mis personajes")),r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{as:c.c,to:"/newGame"},"Crear Partida"))),r.a.createElement(h.a,{style:{width:"20%",justifyContent:"flex-end"}},r.a.createElement(h.a.Item,{onClick:l},"Logout")))},v=a(81),C=a.n(v),j=a(67),O=a.n(j),y=a(68),x=a.n(y);function w(){var e=Object(u.a)(["\n  margin: 10px 0;\n  padding: 10px 0;\n  border-radius: 2px;\n\n  p {\n    font-size: 1.2em;\n  }\n\n  &:hover {\n    h2 {\n      font-size: 1.4em;\n    }\n    font-size: 1.3em;\n    background-color: ",";\n  }\n"]);return w=function(){return e},e}function k(){var e=Object(u.a)(["\n  font-size: 3em;\n  animation: "," 5s ease-out;\n  color: ",";\n  font-weight: 900;\n  letter-spacing: 5px;\n  text-align: center;\n"]);return k=function(){return e},e}function I(){var e=Object(u.a)(["\n      from {\n        opacity: 0;\n      }\n\n      to {\n        opacity: 1;\n      }\n    "]);return I=function(){return e},e}function S(){var e=Object(u.a)(["\n  margin: 20px;\n  transform: translateY();\n  animation: "," 4s ease-out;\n"]);return S=function(){return e},e}function G(){var e=Object(u.a)(["\n  position: absolute;\n  left: 5%;\n  top: 100px;\n  z-index: -9000;\n  transform: rotate(-15deg);\n  opacity: 0.5;\n  filter: blur(1px);\n  filter: contrast(70%);\n  animation: "," 3s cubic-bezier(0.71, 0.57, 0.46, 0.92);\n"]);return G=function(){return e},e}function L(){var e=Object(u.a)(["\n    from {\n      transform: translateY(1000px) rotate(0deg)\n    }\n    \n    to {\n      rotate(-15deg)\n      /* rotate(-15deg) */\n      transform: translateY(0px) rotate(-15deg)\n    }\n    "]);return L=function(){return e},e}function T(){var e=Object(u.a)(["\n    from {\n      opacity: 0;\n      transform: translateY(1000px)\n    }\n    \n    to {\n      opacity: 1;\n      transform: translateY(0px)\n    }\n  "]);return T=function(){return e},e}function U(){var e=Object(u.a)(["\n  background-color: ",";\n  text-align: center;\n  height: 80vh;\n  padding-top: 40px;\n  overflow: auto;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"]);return U=function(){return e},e}var F=g.default.section(U(),(function(e){return e.theme.background.lightOverlay})),_=Object(g.keyframes)(T()),N=Object(g.keyframes)(L()),z=g.default.img(G(),N),R=g.default.article(S(),_),A=Object(g.keyframes)(I()),D=g.default.h1(k(),A,(function(e){return e.theme.colors.general})),B=g.default.div(w(),(function(e){return e.theme.background.overlay}));var H=function(e){var t=e.games,a=e.loggedInUser,l=Object(n.useState)(!1),o=Object(s.a)(l,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){if(!i){var e=document.createElement("link");e.rel="preload",e.as="image",e.href=C.a;var t=document.createElement("link"),a=document.createElement("link");t.rel="prefetch",a.rel="prefetch",t.href=O.a,a.href=x.a,t.as="image",a.as="image",document.head.append(t),document.head.append(a),document.head.append(e),u(!0)}}),[]),r.a.createElement("div",{id:"container1",style:{overflow:"hidden"}},r.a.createElement(D,null,"\xdaltimas historias"),r.a.createElement(F,{id:"container2"},r.a.createElement(z,{src:C.a}),r.a.createElement(R,null,t.map((function(e,t){return r.a.createElement(c.b,{to:a&&a._id===e.creator?"/modify/".concat(e._id):"/read/".concat(e._id)},r.a.createElement(B,{key:t},r.a.createElement("h2",null,e.title),r.a.createElement("em",null,"Nivel minimo: ",e.minLevel),r.a.createElement("p",null,e.description.slice(0,350))))})))))},M=a(236),P=a(122);var q=function(){return r.a.createElement(m.a,null,r.a.createElement(M.a,null,r.a.createElement(P.a,{lg:6},"Imagen"),r.a.createElement(P.a,{lg:6},"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique pariatur magni nesciunt soluta expedita molestiae suscipit deleniti consequuntur dolor impedit. Itaque iure libero perspiciatis, cum asperiores eveniet non error totam?")))},Y=a(17),K=a(18),Q=a(19),W=a.n(Q),J=function(){function e(){Object(Y.a)(this,e),this.baseURL="".concat("https://tellmaster.herokuapp.com/api","/games/"),this.service=W.a.create({baseURL:this.baseURL,withCredentials:!0})}return Object(K.a)(e,[{key:"getOneGame",value:function(e){return this.service.get("/?gameId=".concat(e)).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"getLastGames",value:function(){return this.service.get("/last?limit=5").then((function(e){return e.data.gamesFound})).catch((function(e){return console.log(e)}))}},{key:"createGame",value:function(e){var t=e.creator,a=e.title,n=e.minLevel,r=e.description,c=e.simple;return this.service.post("",{creator:t,title:a,minLevel:n,description:r,simple:c}).then((function(e){return e.data.createdGame})).catch((function(e){return console.log(e)}))}}]),e}(),$=function(){function e(){Object(Y.a)(this,e),this.baseURL="".concat("https://tellmaster.herokuapp.com/api","/auth/"),this.service=W.a.create({baseURL:this.baseURL,withCredentials:!0,timeout:3e4,timeoutErrorMessage:"El servidor ha tardado demasiado tiempo en responder"})}return Object(K.a)(e,[{key:"login",value:function(e){var t=e.username,a=e.email,n=e.password;return this.service.post("login",{username:t,email:a,password:n}).then((function(e){return e.data})).catch((function(e){if(console.log({err:e}),"401"==e.response.status)return null;"ECONNABORTED"===e.code&&console.error(e.message)}))}},{key:"signup",value:function(e){var t=e.username,a=e.email,n=e.password;return this.service.post("signup",{username:t,email:a,password:n}).then((function(e){return e.data})).catch((function(e){console.log({err:e}),"ECONNABORTED"===e.code&&console.error(e.message)}))}},{key:"logout",value:function(){return this.service.post("logout").then((function(e){return e.data})).catch((function(e){console.log({err:e}),"ECONNABORTED"===e.code&&console.error(e.message)}))}},{key:"loggedin",value:function(){return this.service.get("loggedin").then((function(e){return e.data})).catch((function(e){console.log({err:e}),"ECONNABORTED"===e.code&&console.error(e.message)}))}}]),e}(),V=a(238);function X(){var e=Object(u.a)(["\n  width: 100px;\n"]);return X=function(){return e},e}function Z(){var e=Object(u.a)(["\n    background-color: rgba(0, 0, 0, 1);\n    color: white;\n    border: 0.3px solid white;\n    display: inline-block;\n    font-weight: 400;\n    text-align: center;\n    vertical-align: middle;\n    -webkit-user-select: none;\n    user-select: none;\n    padding: 0.375rem 0.75rem;\n    font-size: 1rem;\n    line-height: 1.5;\n    border-radius: 0.25rem;\n    &:hover {\n      background-color: rgba(44, 44, 44, 1);\n      -webkit-box-shadow: 0px 10px 7px 1px rgba(252, 252, 252, 0.3);\n      -moz-box-shadow: 0px 1px 7px 1px rgba(252, 252, 252, 0.3);\n      box-shadow: 0px 1px 7px 1px rgba(252, 252, 252, 0.3);\n      transform: scale(1.05);\n      transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n    }\n  "]);return Z=function(){return e},e}var ee=function(e){var t=g.default.button(Z());return r.a.createElement(t,e,e.text)},te=Object(g.default)(ee)(X());var ae=function(e){var t=e.setUser,a=e.onHide,c=new $,l=Object(n.useState)(""),o=Object(s.a)(l,2),i=o[0],u=o[1],m=Object(n.useState)(""),d=Object(s.a)(m,2),p=d[0],h=d[1],f=Object(n.useState)(""),g=Object(s.a)(f,2),b=g[0],E=g[1];function v(e){var t=e.currentTarget,a=t.name,n=t.value;switch(a){case"username":u(n);break;case"email":h(n);break;case"password":E(n);break;default:throw Error("no correct value")}}return r.a.createElement(V.a,{onSubmit:function(e){e.preventDefault(),c.login({username:i,email:p,password:b}).then((function(e){return t(e)})),u(""),h(""),E(""),a&&a()}},r.a.createElement(V.a.Group,{controlId:"username"},r.a.createElement(V.a.Label,null,"Username"),r.a.createElement(V.a.Control,{onChange:v,name:"username",value:i,type:"text",placeholder:"Enter username"}),r.a.createElement(V.a.Text,null,"Choose an username.")),r.a.createElement(V.a.Group,{controlId:"email",value:p},r.a.createElement(V.a.Label,null,"Email address"),r.a.createElement(V.a.Control,{onChange:v,name:"email",type:"email",placeholder:"Enter email"}),r.a.createElement(V.a.Text,null,"We'll never share your email with anyone else.")),r.a.createElement(V.a.Group,{controlId:"password",value:b},r.a.createElement(V.a.Label,null,"Password"),r.a.createElement(V.a.Control,{onChange:v,name:"password",type:"password",placeholder:"Password"})),r.a.createElement(ee,{text:"Submit",type:"submit"}))},ne=a(121);var re=function(e){var t=e.setUser,a=e.onHide,c=new $,l=Object(n.useState)(""),o=Object(s.a)(l,2),i=o[0],u=o[1],m=Object(n.useState)(""),d=Object(s.a)(m,2),p=d[0],h=d[1],f=Object(n.useState)(""),g=Object(s.a)(f,2),b=g[0],E=g[1];function v(e){var t=e.currentTarget,a=t.name,n=t.value;switch(a){case"username":u(n);break;case"email":h(n);break;case"password":E(n);break;default:throw Error("no correct value")}}return r.a.createElement(V.a,{onSubmit:function(e){e.preventDefault(),c.signup({username:i,email:p,password:b}).then((function(e){return t(e)})),a&&a()}},r.a.createElement(V.a.Group,{controlId:"username"},r.a.createElement(V.a.Label,null,"Username"),r.a.createElement(V.a.Control,{onChange:v,name:"username",value:i,type:"text",placeholder:"Enter username"}),r.a.createElement(V.a.Text,{className:"text-muted"},"Choose an username.")),r.a.createElement(V.a.Group,{controlId:"email",value:p},r.a.createElement(V.a.Label,null,"Email address"),r.a.createElement(V.a.Control,{onChange:v,name:"email",type:"email",placeholder:"Enter email"}),r.a.createElement(V.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(V.a.Group,{controlId:"password",value:b},r.a.createElement(V.a.Label,null,"Password"),r.a.createElement(V.a.Control,{onChange:v,name:"password",type:"password",placeholder:"Password"})),r.a.createElement(ne.a,{variant:"primary",type:"submit"},"Submit"))},ce=a(237);function le(){var e=Object(u.a)(["\n    background-color: ",";\n    width: 40%;\n    margin: 10vh auto;\n    border-radius: 5px;\n    font-size: 1.1em;\n    color: white;\n  "]);return le=function(){return e},e}var oe=function(e){var t=e.show,a=e.children,c=e.onHide,l=e.title,o=g.default.div(le(),(function(e){return e.theme.background.modals}));return r.a.createElement(ce.a,{dialogAs:o,show:t,onHide:c,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,autoFocus:!0},r.a.createElement(ce.a.Header,{closeButton:!0,onHide:c},r.a.createElement(ce.a.Title,{id:"contained-modal-title-vcenter"},l)),r.a.createElement(ce.a.Body,null,Object(n.cloneElement)(a,{show:t,onHide:c})))};var ie=Object(l.f)((function(e){var t=e.loggedInUser,a=e.updateLastGames,c=e.history,l=e.simple,o=new J,i=Object(n.useState)(""),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(1),h=Object(s.a)(p,2),f=h[0],g=h[1],b=Object(n.useState)(""),E=Object(s.a)(b,2),v=E[0],C=E[1];function j(e){var t=e.currentTarget,a=t.name,n=t.value;switch(a){case"title":d(n);break;case"description":C(n);break;case"minLevel":g(n);break;default:throw Error("Algo ha ido mal con el formulario")}}return r.a.createElement("div",null,r.a.createElement("h2",null,"Crear un nuevo juego es muy sencillo tan solo necesitas..."),r.a.createElement(V.a,{onSubmit:function(e){e.preventDefault(),l&&g(1),o.createGame({creator:t._id,title:m,minLevel:f,description:v,simple:l}).then((function(e){a(),console.log(e)})).catch((function(e){return console.log(e)})).finally((function(){return c.push("/")}))}},r.a.createElement(V.a.Group,{controlId:"title"},r.a.createElement(V.a.Label,null,"Elegir un titulo:"),r.a.createElement(V.a.Control,{name:"title",onChange:j,value:m,type:"text",placeholder:"El titulo de tu historia!"})),!l&&r.a.createElement(V.a.Group,{controlId:"minLevel"},r.a.createElement(V.a.Label,null,"Un nivel m\xednimo para comenzar la aventura:"),r.a.createElement("p",null,f),r.a.createElement(V.a.Control,{name:"minLevel",onChange:j,value:f,type:"range",min:"1",max:"20",step:"1",placeholder:"Ej: 5"}),r.a.createElement(V.a.Text,{className:"text-muted"},"Las aventuras b\xe1sicas comienzan en nivel 1, de 8 a 14 ya son todo un reto, a partir de ah\xed los heroes pueden luchar contra los mismos dioses.")),r.a.createElement(V.a.Group,{controlId:"description"},r.a.createElement(V.a.Label,null,"El resumen de tu aventura! Hazlo atractivo de forma que la gente quiera jugarla ;)"),r.a.createElement(V.a.Control,{name:"description",onChange:j,value:v,type:"text",placeholder:"El titulo de tu historia!"})),r.a.createElement(te,{type:"submit",text:"Crear"})))}));function ue(){var e=Object(u.a)(["\n  z-index: -9000;\n  opacity: 0.5;\n  filter: blur(1px);\n  filter: contrast(80%);\n"]);return ue=function(){return e},e}var se=g.default.img(ue()),me=function(e){return r.a.createElement(se,e)};function de(){var e=Object(u.a)(["\n    position: absolute;\n    right: 0px;\n    top: -40px;\n    max-height: 200px;\n    max-width: 200px;\n    transform: rotate(15deg);\n  "]);return de=function(){return e},e}function pe(){var e=Object(u.a)(["\n    position: absolute;\n    left: 0px;\n    top: -40px;\n    max-height: 200px;\n    max-width: 200px;\n    transform: rotate(-15deg);\n  "]);return pe=function(){return e},e}function he(){var e=Object(u.a)(["\n    text-align: center;\n    font-size: 3rem;\n\n    &:hover {\n      cursor: pointer;\n      transform: scale(1.2);\n      p {\n        text-shadow: 0px 10px 10px white;\n        border-top: 1px solid white;\n      }\n    }\n  "]);return he=function(){return e},e}function fe(){var e=Object(u.a)(["\n    align-items: center;\n    height: calc(60vh);\n  "]);return fe=function(){return e},e}var ge=function(e){var t=e.setMode,a=Object(g.default)(M.a)(fe()),n=Object(g.default)(P.a)(he()),c=Object(g.default)(me)(pe()),l=Object(g.default)(me)(de());return r.a.createElement(a,null,r.a.createElement(n,{onClick:function(){return t(!0)}},r.a.createElement(c,{src:O.a}),r.a.createElement("p",null,"Historia simple")),r.a.createElement(n,{onClick:function(){return t(!1)}},r.a.createElement(l,{src:x.a}),r.a.createElement("p",null,"Aventura de Rol")))};var be=function(e){var t=e.loggedInUser,a=e.updateLastGames,c=Object(n.useState)(null),l=Object(s.a)(c,2),o=l[0],i=l[1];return null===o?r.a.createElement(ge,{setMode:i}):r.a.createElement(ie,{simple:o,updateLastGames:a,loggedInUser:t})},Ee=a(69),ve=a(31),Ce=a(240),je=function(){function e(){Object(Y.a)(this,e),this.baseURL="".concat("https://tellmaster.herokuapp.com/api","/choices/"),this.service=W.a.create({baseURL:this.baseURL,withCredentials:!0})}return Object(K.a)(e,[{key:"getChoicesFromChapter",value:function(e){return this.service.get("/?chapterId=".concat(e)).then((function(e){return e.data.choicesFound})).catch((function(e){return console.log(e)}))}},{key:"createChoice",value:function(e){var t=e.description,a=e.trial,n=e.successTargetChapter,r=e.failureTargetChapter,c=e.pxGranted;return this.service.post("",{description:t,trial:a,successTargetChapter:n,failureTargetChapter:r,pxGranted:c}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"updateChoice",value:function(e){return this.service.patch("/",e).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"deleteChoice",value:function(e){return this.service.delete("",{choiceId:e}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}}]),e}(),Oe=function(){function e(){Object(Y.a)(this,e),this.baseURL="".concat("https://tellmaster.herokuapp.com/api","/chapters/"),this.service=W.a.create({baseURL:this.baseURL,withCredentials:!0})}return Object(K.a)(e,[{key:"getChapter",value:function(e){return this.service.get("/?chapterId=".concat(e)).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"getChaptersFromGame",value:function(e){return this.service.get("/fromGame/?gameId=".concat(e)).then((function(e){return e.data.chapters})).catch((function(e){return console.log(e)}))}},{key:"createChapter",value:function(e){var t=e.description,a=e.choices,n=e.gameId;return this.service.post("",{description:t,choices:a,gameId:n}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"updateChapter",value:function(e){return this.service.patch("/",e).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}}]),e}();var ye=Object(l.f)((function(e){var t=e.finishChoiceForm,a=e.idx,c=e.choice,l=e.toogleCard,o=e.closeChoiceForm,i=e.match,u=e.simple,m=new Oe,d=new je,p=Object(n.useState)(c?c.description:""),h=Object(s.a)(p,2),f=h[0],g=h[1],b=Object(n.useState)(c?c.trial.difficulty:10),E=Object(s.a)(b,2),v=E[0],C=E[1],j=Object(n.useState)(c?c.trial.characteristic:"str"),O=Object(s.a)(j,2),y=O[0],x=O[1],w=Object(n.useState)(c?c.pxGranted:0),k=Object(s.a)(w,2),I=k[0],S=k[1],G=Object(n.useState)(c?c.successTargetChapter:null),L=Object(s.a)(G,2),T=L[0],U=L[1],F=Object(n.useState)(c?c.failureTargetChapter:null),_=Object(s.a)(F,2),N=_[0],z=_[1],R=Object(n.useState)([]),A=Object(s.a)(R,2),D=A[0],B=A[1];function H(e){d.createChoice(e).then((function(e){t(e._id,a,e)}))}function M(e){d.updateChoice(e).then((function(e){l(a)}))}function P(e){var t=e.currentTarget,a=t.name,n=t.value;switch(a){case"description":g(n);break;case"difficulty":C(n);break;case"characteristic":console.log(n),x(n);break;case"pxGranted":console.log(n),S(n);break;case"successTargetChapter":console.log(n),U(n);break;case"failureTargetChapter":console.log(n),z(n);break;default:throw Error("Algo ha ido mal con el formulario")}}return Object(n.useEffect)((function(){m.getChaptersFromGame(i.params.gameId).then((function(e){B(e)}))}),[i.params.gameId]),r.a.createElement(Ce.a,null,r.a.createElement(V.a,{onSubmit:function(e){e.preventDefault();var t={difficulty:v,characteristic:y};if(c&&u)c.trial={difficulty:-10,characteristic:"str"},c.description=f,c.pxGranted=0,c.successTargetChapter=T,c.failureTargetChapter=T,M(c);else if(c)c.trial=t,c.description=f,c.pxGranted=I,c.successTargetChapter=T,c.failureTargetChapter=N,M(c);else if(u){console.log("creaci\xf3n simple");var a={description:f,trial:{difficulty:-10,characteristic:"str"},pxGranted:0,successTargetChapter:T,failureTargetChapter:T};console.log(a,"choice pa tu body"),H(a)}else{H({description:f,trial:t,pxGranted:I,successTargetChapter:T,failureTargetChapter:N})}},className:"choiceForm"},r.a.createElement(Ce.a.Header,{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(ne.a,{onClick:function(){o?o(a):l(a)},style:{width:"40px"},variant:"danger"},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement(ne.a,{type:"submit",style:{width:"40px"},variant:"success"},r.a.createElement("i",{className:"fas fa-check"}))),r.a.createElement(Ce.a.Body,null,r.a.createElement(V.a.Group,{controlId:"choice"},r.a.createElement(V.a.Label,null,"Describe la elecci\xf3n:"),r.a.createElement(V.a.Control,{name:"description",onChange:P,value:f,placeholder:"Fuerzo la puerta"}),!u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a.Label,null,"\xbfQue dificultad tiene?"),r.a.createElement(V.a.Control,{type:"number",name:"difficulty",onChange:P,value:v,placeholder:"Fuerzo la puerta"}),c?null:r.a.createElement(V.a.Text,null,"Dificultades de 10 son adecuadas para una persona media, 15 son para expertos y 20 para verdaderos prod\xedgios."),r.a.createElement(V.a.Label,null,"\xbfQu\xe9 caracteristica es necesaria para superarla?"),r.a.createElement(V.a.Control,{onChange:P,name:"characteristic",as:"select",custom:!0},r.a.createElement("option",{value:"str"},"Fuerza"),r.a.createElement("option",{value:"des"},"Destreza"),r.a.createElement("option",{value:"agi"},"Agilidad, velocidad"),r.a.createElement("option",{value:"con"},"Constituci\xf3n f\xedsica"),r.a.createElement("option",{value:"int"},"Inteligencia"),r.a.createElement("option",{value:"wis"},"Sabidur\xeda"),r.a.createElement("option",{value:"char"},"Carisma")))),!u&&r.a.createElement(V.a.Group,{controlId:"choice"},r.a.createElement(V.a.Label,null,"Cuanta experiencia da el \xe9xito:"),r.a.createElement(V.a.Control,{name:"pxGranted",onChange:P,value:I,placeholder:"100",type:"number"}))),r.a.createElement(V.a.Group,{controlId:"successTargetChapter"},r.a.createElement(V.a.Label,null,u?"Cap de destino":"Cap de destino con exito:"),r.a.createElement(V.a.Control,{as:"select",custom:!0,name:"successTargetChapter",onChange:P},r.a.createElement("option",{value:"null"},"Ninguno"),D.map((function(e){return e._id===T?r.a.createElement("option",{selected:!0,value:e._id},e.description):r.a.createElement("option",{value:e._id},e.description)})))),!u&&r.a.createElement(V.a.Group,{controlId:"failureTargetChapter"},r.a.createElement(V.a.Label,null,"Cap de destino con fracaso:"),r.a.createElement(V.a.Control,{as:"select",name:"failureTargetChapter",custom:!0,onChange:P},r.a.createElement("option",{value:"null"},"Ninguno"),D.map((function(e){return e._id===N?r.a.createElement("option",{selected:!0,value:e._id},e.description):r.a.createElement("option",{value:e._id},e.description)}))))))}));function xe(){var e=Object(u.a)(["\n  width: 25%;\n"]);return xe=function(){return e},e}function we(){var e=Object(u.a)(["\n  display: flex;\n"]);return we=function(){return e},e}var ke=g.default.div(we()),Ie=g.default.div(xe());var Se=Object(l.f)((function(e){var t=e.finishChoiceForm,a=e.idx,c=e.choice,l=e.toogleCard,o=e.closeChoiceForm,i=e.match,u=e.simple,m=new Oe,d=new je,p=Object(n.useState)(c?c.description:""),h=Object(s.a)(p,2),f=h[0],g=h[1],b=Object(n.useState)(c?c.trial.difficulty:10),E=Object(s.a)(b,2),v=E[0],C=E[1],j=Object(n.useState)(c?c.trial.characteristic:"str"),O=Object(s.a)(j,2),y=O[0],x=O[1],w=Object(n.useState)(c?c.pxGranted:0),k=Object(s.a)(w,2),I=k[0],S=k[1],G=Object(n.useState)(c?c.successTargetChapter:null),L=Object(s.a)(G,2),T=L[0],U=L[1],F=Object(n.useState)(c?c.failureTargetChapter:null),_=Object(s.a)(F,2),N=_[0],z=_[1],R=Object(n.useState)([]),A=Object(s.a)(R,2),D=A[0],B=A[1];function H(e){d.createChoice(e).then((function(e){t(e._id,a,e)}))}function M(e){d.updateChoice(e).then((function(e){l(a)}))}function P(e){e.preventDefault();var t={difficulty:v,characteristic:y};if(c&&u)c.trial={difficulty:-10,characteristic:"str"},c.description=f,c.pxGranted=0,c.successTargetChapter=T,c.failureTargetChapter=T,M(c);else if(c)c.trial=t,c.description=f,c.pxGranted=I,c.successTargetChapter=T,c.failureTargetChapter=N,M(c);else if(u){console.log("creaci\xf3n simple");var a={description:f,trial:{difficulty:-10,characteristic:"str"},pxGranted:0,successTargetChapter:T,failureTargetChapter:T};console.log(a,"choice pa tu body"),H(a)}else{H({description:f,trial:t,pxGranted:I,successTargetChapter:T,failureTargetChapter:N})}}function q(e){var t=e.currentTarget,a=t.name,n=t.value;switch(a){case"description":g(n);break;case"difficulty":C(n);break;case"characteristic":console.log(n),x(n);break;case"pxGranted":console.log(n),S(n);break;case"successTargetChapter":console.log(n),U(n);break;case"failureTargetChapter":console.log(n),z(n);break;default:throw Error("Algo ha ido mal con el formulario")}}return Object(n.useEffect)((function(){m.getChaptersFromGame(i.params.gameId).then((function(e){B(e)}))}),[i.params.gameId]),r.a.createElement("div",null,r.a.createElement(ke,null,r.a.createElement("div",{onClick:function(){o?o(a):l(a)},style:{width:"40px"},variant:"danger"},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("div",{onClick:P,style:{width:"40px"},variant:"success"},r.a.createElement("i",{className:"fas fa-check"}))),r.a.createElement("form",{onSubmit:P,className:"choiceForm"},r.a.createElement(ke,null,r.a.createElement(Ie,null,r.a.createElement("label",null,"Describe la elecci\xf3n:",r.a.createElement("input",{id:"description",name:"description",onChange:q,value:f,placeholder:"Fuerzo la puerta"}))),r.a.createElement(Ie,null,!u&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"\xbfQue dificultad tiene?",r.a.createElement("input",{id:"difficulty",type:"number",name:"difficulty",onChange:q,value:v,placeholder:"Fuerzo la puerta"})),c?null:r.a.createElement("small",null,"Dificultades de 10 son adecuadas para una persona media, 15 son para expertos y 20 para verdaderos prod\xedgios."),r.a.createElement("label",null,"\xbfQu\xe9 caracteristica es necesaria para superarla?",r.a.createElement("select",{id:"characteristic",onChange:q,name:"characteristic"},r.a.createElement("option",{value:"str"},"Fuerza"),r.a.createElement("option",{value:"des"},"Destreza"),r.a.createElement("option",{value:"agi"},"Agilidad, velocidad"),r.a.createElement("option",{value:"con"},"Constituci\xf3n f\xedsica"),r.a.createElement("option",{value:"int"},"Inteligencia"),r.a.createElement("option",{value:"wis"},"Sabidur\xeda"),r.a.createElement("option",{value:"char"},"Carisma"))))),r.a.createElement(Ie,null,!u&&r.a.createElement("label",null,"Cuanta experiencia da el \xe9xito:",r.a.createElement("input",{id:"pxGranted",name:"pxGranted",onChange:q,value:I,placeholder:"100",type:"number"}))),r.a.createElement(Ie,null,r.a.createElement("label",null,u?"Cap de destino":"Cap de destino con exito:",r.a.createElement("select",{id:"successTargetChapter",name:"successTargetChapter",onChange:q},r.a.createElement("option",{value:"null"},"Ninguno"),D.map((function(e){return e._id===T?r.a.createElement("option",{selected:!0,value:e._id},e.description):r.a.createElement("option",{value:e._id},e.description)})))),!u&&r.a.createElement("label",null,"Cap de destino con fracaso:",r.a.createElement("select",{id:"failuterTargetChapter",as:"select",name:"failureTargetChapter",custom:!0,onChange:q},r.a.createElement("option",{value:"null"},"Ninguno"),D.map((function(e){return e._id===N?r.a.createElement("option",{selected:!0,value:e._id},e.description):r.a.createElement("option",{value:e._id},e.description)}))))))))}));var Ge=function(e){var t=e.choice,a=e.idx,n=e.toogleCard;return r.a.createElement(Ce.a,null,r.a.createElement(Ce.a.Header,{onClick:function(){return n(a)}},"Editar"),r.a.createElement(Ce.a.Body,{style:{backgroundColor:t.successTargetChapter&&t.failureTargetChapter?"lightgreen":"orange"}},r.a.createElement("p",null,t.description),r.a.createElement("p",null,function(e){var t;switch(e){case"str":t="Fuerza";break;case"des":t="Destreza";break;case"agi":t="Agilidad, velocidad";break;case"con":t="Constituci\xf3n";break;case"wis":t="Sabidur\xeda";break;case"int":t="Inteligencia";break;case"char":t="Carisma";break;default:throw Error("algo fue mal con la card de la choice")}return t}(t.trial.characteristic)),r.a.createElement("p",null,t.trial.difficulty),r.a.createElement("p",null,t.pxGranted)))},Le=a(124),Te=a.n(Le),Ue=a(125),Fe=a.n(Ue);var _e=Object(l.f)((function(e){var t=e.updateLastGames,a=e.match,c=e.chapterId,l=e.getAllChapters,o=e.closeNewChapterForm,i=e.simple,u=new Oe,m=a.params.gameId,d=Object(n.useState)(""),p=Object(s.a)(d,2),h=p[0],f=p[1],g=Object(n.useState)([]),b=Object(s.a)(g,2),E=b[0],v=b[1],C=Object(n.useState)([]),j=Object(s.a)(C,2),O=j[0],y=j[1],x=Object(n.useState)([]),w=Object(s.a)(x,2),k=w[0],I=w[1],S=Object(n.useState)(!1),G=Object(s.a)(S,2),L=G[0],T=G[1];function U(){c?u.getChapter(c).then((function(e){f(e.description),y(e.choices),v(e.choices.filter((function(e){return e._id}))),T(!0)})):f("El texto de tu cap\xedtulo va aqu\xed")}function F(e,t,a){!function(e,t){var a=Object(ve.a)(E);a.push(e),v(a)}(e),function(e){var t=Object(ve.a)(O);t.push(e),y(t)}(a),_(t)}function _(e){var t=Object(ve.a)(k);t.splice(e,1),I(t)}function N(e){console.log(e);var t=Object(ve.a)(O),a=Object(Ee.a)({},t[e]);a.show=!O[e].show,t.splice(e,1,a),y(t)}return Object(n.useEffect)((function(){U()}),[]),c&&!L?"loading":r.a.createElement("div",{className:".ck-editor"},r.a.createElement(Te.a,{editor:Fe.a,data:h,onInit:function(e){console.log("Editor is ready to use!",e)},onChange:function(e,t){var a=t.getData();f(a),console.log({event:e,editor:t,data:a})},onBlur:function(e,t){console.log("Blur.",t)},onFocus:function(e,t){console.log("Focus.",t)}}),r.a.createElement(ne.a,{onClick:function(){var e=Object(ve.a)(k);e.push(!0),I(e)}},"A\xf1adir elecci\xf3n"),O.map((function(e,t){return r.a.createElement(P.a,{key:t,lg:3},e.show?r.a.createElement(ye,{simple:i,toogleCard:N,choice:e,idx:t}):r.a.createElement(Ge,{toogleCard:N,choice:e,idx:t,simple:i}))})),k.map((function(e,t){return r.a.createElement("div",{key:t},r.a.cloneElement(r.a.createElement(Se,null),{idx:t,finishChoiceForm:F,closeChoiceForm:_,simple:i}))})),r.a.createElement(ne.a,{onClick:function(e){var a;e.preventDefault(),h&&(c?(a={_id:c,description:h,choices:E},u.updateChapter(a).then((function(e){t(),U(),l()})).catch((function(e){return console.log(e)}))):(!function(e){u.createChapter(e).then((function(e){l(),t()})).catch((function(e){return console.log(e)}))}({description:h,choices:E,gameId:m}),o()))}},c?"Modificar":"Crear"))})),Ne=a(241);function ze(){var e=Object(u.a)(["\n    html, body {\n      overflow: auto\n    }\n  "]);return ze=function(){return e},e}function Re(){var e=Object(u.a)(["\n  div {\n    background-color: ",";\n  }\n"]);return Re=function(){return e},e}var Ae=Object(g.default)(Ne.a)(Re(),(function(e){return e.theme.background.overlay}));var De=function(e){var t=e.loggedInUser,a=e.updateLastGames,c=e.match,l=e.history,o=Object(g.createGlobalStyle)(ze()),i=new Oe,u=new J,m=Object(n.useState)([]),d=Object(s.a)(m,2),p=d[0],h=d[1],f=Object(n.useState)(!1),b=Object(s.a)(f,2),E=b[0],v=b[1],C=Object(n.useState)(null),j=Object(s.a)(C,2),O=j[0],y=j[1];function x(){i.getChaptersFromGame(c.params.gameId).then((function(e){h(e)}))}return Object(n.useEffect)((function(){u.getOneGame(c.params.gameId).then((function(e){y(e.simple),e.creator!==t._id&&l.replace("/read/".concat(c.params.gameId))}))}),[t]),Object(n.useEffect)((function(){x()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(o,null),r.a.createElement(Ae,null,p.length&&r.a.createElement("div",null,r.a.createElement("h1",null,"Edita los capitulos ya creados"),p.map((function(e,n){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae.Item,{active:e.show,onClick:function(){return function(e){var t=Object(ve.a)(p),a=Object(Ee.a)({},t[e]);a.show=!p[e].show,t.splice(e,1,a),h(t)}(n)}},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})),e.show?r.a.createElement(Ae.Item,null,r.a.createElement(_e,{simple:O,chapterId:e._id,getAllChapters:x,loggedInUser:t,updateLastGames:a})):null)})))),r.a.createElement(Ae,null,r.a.createElement("div",null,r.a.createElement("h1",null,"Escribe un nuevo capitulo"),r.a.createElement(Ae.Item,{onClick:function(){return v(!E)}},p.length?"Escribe un nuevo capitulo":"Escribe el primer cap\xedtulo"),E?r.a.createElement(_e,{simple:O,closeNewChapterForm:function(){return v(!1)},getAllChapters:x,loggedInUser:t,updateLastGames:a}):null)))},Be=function(){function e(){Object(Y.a)(this,e),this.baseURL="".concat("https://tellmaster.herokuapp.com/api","/savedGames/"),this.service=W.a.create({baseURL:this.baseURL,withCredentials:!0})}return Object(K.a)(e,[{key:"getUserSaves",value:function(e,t){var a=t?"/user/?userId=".concat(e,"&gameId=").concat(t):"/user/?userId=".concat(e);return this.service.get(a).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"getFullSave",value:function(e){return this.service.get("/full/?saveId=".concat(e)).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"createSavedGame",value:function(e){var t=e.gameId,a=e.currentChapter,n=e.character;return this.service.post("",{gameId:t,currentChapter:a,character:n}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"assignSaveToUser",value:function(e,t){return this.service.post("/assign",{userId:e,saveId:t}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"updateSavedGame",value:function(e){var t=e.savedGameId,a=e.gameId,n=e.currentChapter,r=e.character;return this.service.patch("",{savedGameId:t,gameId:a,currentChapter:n,character:r}).then((function(e){return e.data}))}},{key:"deleteSave",value:function(e){return this.service.delete("",{savedGameId:e}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}}]),e}(),He=function(){function e(){Object(Y.a)(this,e),this.baseURL="".concat("https://tellmaster.herokuapp.com/api","/characters/"),this.service=W.a.create({baseURL:this.baseURL,withCredentials:!0})}return Object(K.a)(e,[{key:"getCharactersFromUser",value:function(e){return this.service.get("/?userId=".concat(e)).then((function(e){return e.data.characters})).catch((function(e){return console.log(e)}))}},{key:"createCharacter",value:function(e){return this.service.post("",{character:e}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"assignCharacterToUser",value:function(e,t){return this.service.post("assign",{userId:e,characterId:t}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}}]),e}();var Me=function(e){e.setCharacter;var t=e.hideForm,a=e.setUser,c=e.loggedInUser,l=new He,o=Object(n.useState)(""),i=Object(s.a)(o,2),u=i[0],m=i[1],d=Object(n.useState)(100),p=Object(s.a)(d,1)[0],h=Object(n.useState)(8),f=Object(s.a)(h,2),g=f[0],b=f[1],E=Object(n.useState)(8),v=Object(s.a)(E,2),C=v[0],j=v[1],O=Object(n.useState)(8),y=Object(s.a)(O,2),x=y[0],w=y[1],k=Object(n.useState)(8),I=Object(s.a)(k,2),S=I[0],G=I[1],L=Object(n.useState)(8),T=Object(s.a)(L,2),U=T[0],F=T[1],_=Object(n.useState)(8),N=Object(s.a)(_,2),z=N[0],R=N[1],A=Object(n.useState)(8),D=Object(s.a)(A,2),B=D[0],H=D[1],M=Object(n.useState)(27),P=Object(s.a)(M,2),q=P[0],Y=P[1];function K(e){var t=e.currentTarget,a=t.name,n=t.value,r=q;if(console.log(n),"name"!==a&&(r=function(e,t){var a=27,n={str:g,des:C,agi:x,con:S,int:U,wis:z,char:B};for(var r in n[e]=t,n)a-=n[r]-8;return a}(a,n)),console.log(r),r>=0){switch(a){case"name":m(n);break;case"str":b(n);break;case"des":j(n);break;case"agi":w(n);break;case"con":G(n);break;case"int":F(n);break;case"wis":R(n);break;case"char":H(n);break;default:throw Error("Algo fue mal con el formulario")}Y(r)}}return r.a.createElement(V.a,{onSubmit:function(e){e.preventDefault();var n={name:u,hp:p,str:g,des:C,agi:x,con:S,int:U,wis:z,char:B};l.createCharacter(n).then((function(e){l.assignCharacterToUser(c._id,e._id).then((function(e){a(e)})),m(""),t()}))}},r.a.createElement(V.a.Group,{controlId:"name"},r.a.createElement(V.a.Label,null,"Nombre del personaje"),r.a.createElement(V.a.Control,{onChange:K,value:u,name:"name",type:"text",placeholder:"Aragor, hijo de Arathorn"})),!q&&r.a.createElement("p",null,r.a.createElement("em",null,"Has superado el m\xe1ximo de puntos a repartir")),r.a.createElement(V.a.Group,{controlId:"str"},r.a.createElement(V.a.Label,null,"Fuerza"),r.a.createElement(V.a.Control,{onChange:K,value:g,name:"str",type:"number",min:7,max:18}),r.a.createElement(V.a.Text,null,"Bonificaci\xf3n al dado: ",parseInt(g/2-5))),r.a.createElement(V.a.Group,{controlId:"des"},r.a.createElement(V.a.Label,null,"Destreza"),r.a.createElement(V.a.Control,{onChange:K,value:C,name:"des",type:"number",min:7,max:18}),r.a.createElement(V.a.Text,null,"Bonificaci\xf3n al dado: ",parseInt(C/2-5))),r.a.createElement(V.a.Group,{controlId:"agi"},r.a.createElement(V.a.Label,null,"Agilidad, velocidad"),r.a.createElement(V.a.Control,{onChange:K,value:x,name:"agi",type:"number",min:7,max:18}),r.a.createElement(V.a.Text,null,"Bonificaci\xf3n al dado: ",parseInt(x/2-5))),r.a.createElement(V.a.Group,{controlId:"con"},r.a.createElement(V.a.Label,null,"Constituci\xf3n f\xedsica, fortaleza"),r.a.createElement(V.a.Control,{onChange:K,value:S,name:"con",type:"number",min:7,max:18}),r.a.createElement(V.a.Text,null,"Bonificaci\xf3n al dado: ",parseInt(S/2-5))),r.a.createElement(V.a.Group,{controlId:"int"},r.a.createElement(V.a.Label,null,"Inteligencia"),r.a.createElement(V.a.Control,{onChange:K,value:U,name:"int",type:"number",min:7,max:18}),r.a.createElement(V.a.Text,null,"Bonificaci\xf3n al dado: ",parseInt(U/2-5))),r.a.createElement(V.a.Group,{controlId:"wis"},r.a.createElement(V.a.Label,null,"Sabidur\xeda, astucia"),r.a.createElement(V.a.Control,{onChange:K,value:z,name:"wis",type:"number",min:7,max:18}),r.a.createElement(V.a.Text,null,"Bonificaci\xf3n al dado: ",parseInt(z/2-5))),r.a.createElement(V.a.Group,{controlId:"char"},r.a.createElement(V.a.Label,null,"Carisma"),r.a.createElement(V.a.Control,{onChange:K,value:B,name:"char",type:"number",min:7,max:18}),r.a.createElement(V.a.Text,null,"Bonificaci\xf3n al dado: ",parseInt(B/2-5))),r.a.createElement(ne.a,{variant:"primary",type:"submit"},"Crear"))};function Pe(){var e=Object(u.a)(["\n    margin: 15px 0;\n  "]);return Pe=function(){return e},e}var qe=function(e){var t=e.characters,a=e.newSave,n=g.default.li(Pe());return console.log(a),r.a.createElement("ul",null,t.map((function(e){return r.a.createElement(n,null,r.a.createElement(ee,{text:"".concat(e.name,". Nivel: ").concat(e.level),onClick:a?function(){return a(e._id)}:null}),r.a.createElement("small",null,"Fue: ",e.str," Des: ",e.des," Agi: ",e.agi," Int: ",e.int," Sab: ",e.wis," Car: ",e.char))})))};var Ye=Object(l.f)((function(e){var t=e.loggedInUser,a=e.setUser,c=e.match,l=e.updateSavedGames,o=e.history,i=new Oe,u=new Be,m=Object(n.useState)(null),d=Object(s.a)(m,2)[1],p=Object(n.useState)(!1),h=Object(s.a)(p,2),f=h[0],g=h[1];function b(){g(!f)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Elige un personaje para jugar: "),t.characters.length>0&&r.a.createElement(qe,{newSave:function(e){i.getChaptersFromGame(c.params.gameId).then((function(t){return u.createSavedGame({gameId:c.params.gameId,currentChapter:t[0]._id,character:e})})).then((function(e){return l(e),o.push("/chapter/".concat(e._id)),u.assignSaveToUser(t._id,e._id)})).then((function(e){a(e)}))},characters:t.characters}),r.a.createElement("button",{onClick:b},"Tambi\xe9n puedes crear un nuevo personaje"),f&&r.a.createElement(Me,{hideForm:b,setUser:a,loggedInUser:t,setCharacter:d}))})),Ke=r.a.createContext(!1),Qe=Ke.Provider,We=Ke,Je=a(37);var $e=Object(l.f)((function(e){var t=e.game,a=e.savedGames;console.log(e);var l=Object(n.useContext)(We);return e.noUser?t?r.a.createElement("section",null,r.a.createElement("article",null,r.a.createElement("h1",null,t.title),r.a.createElement("p",null,t.description),r.a.createElement(Je.a,null,r.a.createElement(Je.a.Toggle,{variant:"failure",id:"dropdown-basic"},"Para jugar, registrate."),r.a.createElement(Je.a.Menu,null)))):r.a.createElement("p",null,"Loading game"):t?r.a.createElement("section",null,r.a.createElement("article",null,r.a.createElement("h1",null,t.title),r.a.createElement("p",null,t.description),l?r.a.createElement(r.a.Fragment,null,r.a.createElement(Je.a,null,r.a.createElement(Je.a.Toggle,{variant:"success",id:"dropdown-basic"},"Continua la aventura"),r.a.createElement(Je.a.Menu,null,a.map((function(e){return r.a.createElement(c.b,{to:"/chapter/".concat(e._id)},r.a.createElement(Je.a.Item,{disabled:!0},e.character.name))}))))):r.a.createElement("button",{disabled:!0},"Continuar la aventura"))):r.a.createElement("p",null,"loading game")}));var Ve=Object(l.f)((function(e){var t=new J,a=new Be,c=e.match,l=e.loggedInUser,o=e.setUser,i=c.params.gameId,u=Object(n.useState)(null),m=Object(s.a)(u,2),d=m[0],p=m[1],h=Object(n.useState)([]),f=Object(s.a)(h,2),g=f[0],b=f[1];return Object(n.useEffect)((function(){t.getOneGame(e.match.params.gameId).then((function(e){return p(e)})),l&&a.getUserSaves(l._id,i).then((function(e){return b(e)}))}),[e.match.params.gameId,l]),e.noUser?r.a.createElement($e,{game:d,noUser:e.noUser}):r.a.createElement(M.a,{style:{justifyContent:"space-between"}},r.a.createElement(P.a,{lg:5},r.a.createElement(Ye,{updateSavedGames:function(e){var t=Object(ve.a)(g);t.push(e),b(t)},setUser:o,loggedInUser:l})),r.a.createElement(P.a,{lg:5},r.a.createElement($e,{game:d,savedGames:g})))})),Xe=function(){function e(){Object(Y.a)(this,e),this.baseURL="".concat("https://tellmaster.herokuapp.com/api","/characterChoices/"),this.service=W.a.create({baseURL:this.baseURL,withCredentials:!0})}return Object(K.a)(e,[{key:"makeChoice",value:function(e,t,a){return this.service.post("/makeChoice",{saveId:e,choiceId:t,characterId:a}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}}]),e}();var Ze=Object(l.f)((function(e){var t=new Xe,a=e.game,n=a.currentChapter,c=a.character;function l(a){t.makeChoice(e.game._id,a.currentTarget.id,c._id).then((function(t){console.log(t),e.updateChapter()}))}return r.a.createElement("div",null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:n.description}}),n.choices.map((function(e){return e.successTargetChapter&&e.failureTargetChapter?r.a.createElement("button",{onClick:l,id:e._id},e.description):r.a.createElement("button",{disabled:!0,onClick:l,id:e._id},e.description)})))}));var et=Object(l.f)((function(e){var t=new Be,a=e.match,c=Object(n.useState)(null),l=Object(s.a)(c,2),o=l[0],i=l[1],u=Object(n.useState)(!1),m=Object(s.a)(u,2),d=m[0],h=m[1];return Object(n.useEffect)((function(){t.getFullSave(a.params.savedGameId).then((function(e){console.log(e,a.params.savedGameId),i(e),h(!0)}))}),[a.params.savedGameId]),d?r.a.createElement(Ze,{updateChapter:function(){t.getFullSave(a.params.savedGameId).then((function(e){console.log(e,a.params.savedGameId),i(e),h(!0)}))},game:o}):r.a.createElement(p.a,null)}));a(33);var tt={background:{general:"rgba(0,0,0, 0.9)",semiSolid:"rgba(0, 0, 0, 0.7)",solid:"rgba(11,11,11, 1)",light:"rgba(240, 240, 240, 0.9)",modals:"rgba(40, 40, 40, 1)",overlay:"rgba(255, 255, 255, 0.1)",lightOverlay:"rgba(255, 255, 255, 0.01)"},colors:{light:"rgba(240, 240, 240, 0.9)",general:"rgb(200, 200, 200)"}};function at(){var e=Object(u.a)(["\n    html, body {\n      overflow: hidden;\n    }\n    body {\n      color: ",";\n      background-color: ",";\n      -webkit-overflow-scrolling: touch;\n    }\n    a {\n      color: #eee;\n    }\n    a:hover {\n      color: #eee;\n      text-decoration: none;\n    }\n"]);return at=function(){return e},e}var nt=function(){var e=new J,t=new $,a=Object(n.useState)([]),c=Object(s.a)(a,2),o=c[0],i=c[1],u=Object(n.useState)(!1),d=Object(s.a)(u,2),p=d[0],h=d[1];function f(e){h(e)}function b(){e.getLastGames().then((function(e){Array.isArray(e)&&!e.every((function(e){return o.find((function(t){return t._id===e._id}))}))&&i(e)}))}Object(n.useEffect)((function(){return b(),function(){i([])}}),[]),Object(n.useEffect)((function(){return!1===p&&t.loggedin().then((function(e){h(e||null)})),function(){}}),[]);var v=Object(n.useState)(!1),C=Object(s.a)(v,2),j=C[0],O=C[1],y=Object(n.useState)(!1),x=Object(s.a)(y,2),w=x[0],k=x[1],I=Object(g.createGlobalStyle)(at(),tt.colors.general,tt.background.general);return r.a.createElement(l.c,null,r.a.createElement(g.ThemeProvider,{theme:tt},r.a.createElement(Qe,{value:p},r.a.createElement(I,null),r.a.createElement(E,{logout:function(){t.logout().then((function(){return h(null)}))},showSignup:function(){return k(!0)},showLogin:function(){return O(!0)},loggedInUser:p}),r.a.createElement(m.a,{fluid:!0},r.a.createElement("main",{style:{height:"calc(100vh - 60px)"},className:"app-wrapper"},r.a.createElement(l.a,{exact:!0,path:"/",render:function(){return r.a.createElement(H,{loggedInUser:p,games:o})}}),p?r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{exact:!0,path:"/myGames",render:function(){return r.a.createElement(q,{loggedInUser:p})}}),r.a.createElement(l.a,{exact:!0,path:"/newGame",render:function(){return r.a.createElement(be,{updateLastGames:b,loggedInUser:p})}}),r.a.createElement(l.a,{exact:!0,path:"/myCharacters",render:function(){return r.a.createElement(qe,{characters:p.characters})}}),r.a.createElement(l.a,{exact:!0,path:"/modify/:gameId",render:function(e){var t=e.match,a=e.history;return r.a.createElement(De,{history:a,match:t,updateLastGames:b,loggedInUser:p})}}),r.a.createElement(l.a,{exact:!0,path:"/chapter/:savedGameId",render:function(){return r.a.createElement(et,null)}}),r.a.createElement(l.a,{exact:!0,path:"/read/:gameId",render:function(){return r.a.createElement(Ve,{setUser:f,loggedInUser:p})}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{exact:!0,path:"/read/:gameId",render:function(){return r.a.createElement(Ve,{noUser:!0,setUser:f,loggedInUser:p})}}),r.a.createElement(l.a,{exact:!0,path:"/:algo"},r.a.createElement("h1",null,"Para ver este contenido has de estar logueado")),r.a.createElement(oe,{title:"Login",show:j,onHide:function(){return O(!1)}},r.a.createElement(ae,{setUser:f})),r.a.createElement(oe,{title:"Signup",show:w,onHide:function(){return k(!1)}},r.a.createElement(re,{setUser:f}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,null,r.a.createElement(l.a,{path:"/",render:function(e){return r.a.createElement(nt,e)}}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},67:function(e,t,a){e.exports=a.p+"static/media/d6book.f2700073.svg"},68:function(e,t,a){e.exports=a.p+"static/media/d20.32c11da5.svg"},81:function(e,t,a){e.exports=a.p+"static/media/playingTable.e9c5973e.png"}},[[129,1,2]]]);
//# sourceMappingURL=main.36429a5e.chunk.js.map